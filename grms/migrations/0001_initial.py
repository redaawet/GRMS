# Generated by Django 5.2.8 on 2025-11-13 06:47

import django.db.models.deletion
from decimal import Decimal
from django.db import migrations, models
from grms.gis_fields import LineStringField, PointField


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ActivityLookup',
            fields=[
                ('activity_code', models.CharField(max_length=10, primary_key=True, serialize=False)),
                ('activity_name', models.CharField(max_length=150)),
                ('default_unit', models.CharField(choices=[('m3', 'm³'), ('m2', 'm²'), ('m', 'm'), ('km', 'km'), ('item', 'item'), ('lump_sum', 'lump sum')], max_length=10)),
                ('is_resource_based', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'ordering': ['activity_code'],
            },
        ),
        migrations.CreateModel(
            name='AnnualWorkPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fiscal_year', models.PositiveIntegerField()),
                ('region', models.CharField(max_length=100)),
                ('woreda', models.CharField(max_length=100)),
                ('priority_rank', models.PositiveIntegerField(help_text='Final priority rank in plan')),
                ('total_budget', models.DecimalField(decimal_places=2, max_digits=15)),
                ('rm_budget', models.DecimalField(decimal_places=2, help_text='Routine Maintenance budget', max_digits=15)),
                ('pm_budget', models.DecimalField(decimal_places=2, help_text='Periodic Maintenance budget', max_digits=15)),
                ('rehab_budget', models.DecimalField(decimal_places=2, help_text='Rehabilitation budget', max_digits=15)),
                ('bottleneck_budget', models.DecimalField(decimal_places=2, help_text='Bottleneck fixes budget', max_digits=15)),
                ('struct_budget', models.DecimalField(decimal_places=2, help_text='Structure interventions budget', max_digits=15)),
                ('status', models.CharField(choices=[('Draft', 'Draft'), ('Submitted', 'Submitted'), ('Approved', 'Approved'), ('Executing', 'Executing'), ('Completed', 'Completed')], default='Draft', max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('approved_by', models.CharField(blank=True, max_length=150, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='StructureInventory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('station_km', models.DecimalField(decimal_places=3, help_text='Location along road (chainage km)', max_digits=8)),
                ('location_point', PointField(blank=True, help_text='GPS coordinates of the structure', null=True, srid=4326)),
                ('structure_category', models.CharField(choices=[('Bridge', 'Bridge'), ('Culvert', 'Culvert'), ('Ford', 'Ford'), ('Retaining Wall', 'Retaining Wall'), ('Gabion Wall', 'Gabion Wall'), ('Other', 'Other')], help_text='General category of structure', max_length=20)),
                ('structure_type', models.CharField(blank=True, max_length=50)),
                ('condition_code', models.PositiveSmallIntegerField(blank=True, help_text='Overall condition rating code (1=Good, 4=Poor)', null=True)),
                ('head_walls_flag', models.BooleanField(default=False, help_text='Head walls present?')),
                ('comments', models.TextField(blank=True)),
                ('attachments', models.JSONField(blank=True, help_text='Photos or inspection docs', null=True)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('modified_date', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='ConditionFactor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('factor', models.CharField(max_length=50, unique=True)),
                ('factor_value', models.PositiveSmallIntegerField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='ConditionRating',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('rating_value', models.PositiveSmallIntegerField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='DistressType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('distress_code', models.CharField(max_length=50, unique=True)),
                ('distress_name', models.CharField(max_length=150)),
                ('category', models.CharField(choices=[('road', 'Road'), ('structure', 'Structure'), ('furniture', 'Furniture'), ('other', 'Other')], max_length=20)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'ordering': ['distress_code'],
            },
        ),
        migrations.CreateModel(
            name='FurnitureInventory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('furniture_type', models.CharField(choices=[('Guard Post', 'Guard Post'), ('Guard Rail', 'Guard Rail'), ('KM Post', 'KM Post'), ('Road Sign', 'Road Sign')], help_text='Furniture category', max_length=20)),
                ('chainage_from_km', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('chainage_to_km', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('left_present', models.BooleanField(default=False)),
                ('right_present', models.BooleanField(default=False)),
                ('comments', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('modified_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='InterventionLookup',
            fields=[
                ('intervention_code', models.CharField(max_length=20, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=150)),
                ('category', models.CharField(choices=[('Road', 'Road'), ('Structure', 'Structure'), ('Bottleneck', 'Bottleneck')], max_length=10)),
                ('unit_measure', models.CharField(choices=[('km', 'km'), ('m', 'm'), ('item', 'item')], max_length=10)),
                ('default_unit_cost', models.DecimalField(decimal_places=2, max_digits=12)),
                ('description', models.TextField(blank=True)),
                ('effective_date', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='PCULookup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vehicle_class', models.CharField(max_length=20)),
                ('pcu_factor', models.DecimalField(decimal_places=3, max_digits=6)),
                ('effective_date', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('region', models.CharField(blank=True, max_length=100, null=True)),
                ('notes', models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name='QAStatus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(max_length=50, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Road',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('road_name_from', models.CharField(max_length=150)),
                ('road_name_to', models.CharField(max_length=150)),
                ('design_standard', models.CharField(choices=[('Basic Access', 'Basic Access'), ('DC1', 'DC1'), ('DC2', 'DC2'), ('DC3', 'DC3'), ('DC4', 'DC4'), ('DC5', 'DC5'), ('DC6', 'DC6'), ('DC7', 'DC7'), ('DC8', 'DC8')], help_text='Design standard category', max_length=20)),
                ('admin_zone', models.CharField(help_text='Administrative zone', max_length=50)),
                ('admin_woreda', models.CharField(help_text='Administrative Woreda', max_length=100)),
                ('total_length_km', models.DecimalField(decimal_places=2, max_digits=6)),
                ('road_start_coordinates', PointField(blank=True, null=True, srid=4326)),
                ('road_end_coordinates', PointField(blank=True, null=True, srid=4326)),
                ('surface_type', models.CharField(choices=[('Earth', 'Earth'), ('Gravel', 'Gravel'), ('Paved', 'Paved')], help_text='Primary surface type', max_length=10)),
                ('managing_authority', models.CharField(choices=[('Federal', 'Federal'), ('Regional', 'Regional'), ('Wereda', 'Wereda'), ('Community', 'Community')], help_text='Responsible authority', max_length=20)),
                ('population_served', models.IntegerField(blank=True, help_text='Population served', null=True)),
                ('year_of_update', models.DateField(blank=True, help_text='Date of last MCI update', null=True)),
                ('remarks', models.TextField(blank=True, help_text='Additional notes or remarks')),
            ],
        ),
        migrations.CreateModel(
            name='RoadSection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('section_number', models.PositiveIntegerField(help_text='Section sequence on the road')),
                ('start_chainage_km', models.DecimalField(decimal_places=3, help_text='Section start chainage (km)', max_digits=8)),
                ('end_chainage_km', models.DecimalField(decimal_places=3, help_text='Section end chainage (km)', max_digits=8)),
                ('length_km', models.DecimalField(decimal_places=3, help_text='Section length (km)', max_digits=8)),
                ('start_coordinates', PointField(blank=True, help_text='Section start GPS', null=True, srid=4326)),
                ('end_coordinates', PointField(blank=True, help_text='Section end GPS', null=True, srid=4326)),
                ('surface_type', models.CharField(choices=[('Earth', 'Earth'), ('Gravel', 'Gravel'), ('Asphalt', 'Asphalt')], max_length=10)),
                ('gravel_thickness_cm', models.DecimalField(blank=True, decimal_places=2, help_text='Gravel thickness (cm) if applicable', max_digits=5, null=True)),
                ('inspector_name', models.CharField(blank=True, max_length=150)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('geometry', LineStringField(blank=True, help_text='Section geometry (LineString)', null=True, srid=4326)),
                ('attachments', models.JSONField(blank=True, help_text='Photos/documents URLs or metadata', null=True)),
                ('road', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sections', to='grms.road')),
            ],
        ),
        migrations.CreateModel(
            name='BridgeDetail',
            fields=[
                ('structure', models.OneToOneField(limit_choices_to={'structure_category': 'Bridge'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureinventory')),
                ('bridge_type', models.CharField(choices=[('Concrete', 'Concrete'), ('Stone', 'Stone'), ('Bailey', 'Bailey'), ('Steel', 'Steel'), ('Timber', 'Timber')], help_text='Type of bridge structure', max_length=20)),
                ('span_count', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('width_m', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('length_m', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('has_head_walls', models.BooleanField(default=False, help_text='Head walls present')),
            ],
        ),
        migrations.CreateModel(
            name='CulvertDetail',
            fields=[
                ('structure', models.OneToOneField(limit_choices_to={'structure_category': 'Culvert'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureinventory')),
                ('culvert_type', models.CharField(choices=[('Slab', 'Slab'), ('Box', 'Box'), ('Steel', 'Steel'), ('Pipe', 'Pipe')], help_text='Type of culvert', max_length=10)),
                ('width_span_m', models.DecimalField(blank=True, decimal_places=2, help_text='Span width (slab/box culverts)', max_digits=6, null=True)),
                ('clear_height_m', models.DecimalField(blank=True, decimal_places=2, help_text='Clear height (slab/box culverts)', max_digits=6, null=True)),
                ('num_pipes', models.PositiveSmallIntegerField(blank=True, help_text='# of pipes (pipe culvert)', null=True)),
                ('pipe_diameter_m', models.DecimalField(blank=True, decimal_places=2, help_text='Pipe diameter (m)', max_digits=5, null=True)),
                ('has_head_walls', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='FordDetail',
            fields=[
                ('structure', models.OneToOneField(limit_choices_to={'structure_category': 'Ford'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureinventory')),
            ],
        ),
        migrations.CreateModel(
            name='GabionWallDetail',
            fields=[
                ('structure', models.OneToOneField(limit_choices_to={'structure_category': 'Gabion Wall'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureinventory')),
            ],
        ),
        migrations.CreateModel(
            name='RetainingWallDetail',
            fields=[
                ('structure', models.OneToOneField(limit_choices_to={'structure_category': 'Retaining Wall'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureinventory')),
            ],
        ),
        migrations.CreateModel(
            name='DistressCondition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('severity_code', models.PositiveSmallIntegerField(choices=[(1, 'Minor'), (2, 'Moderate'), (3, 'Severe')])),
                ('extent_code', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Isolated'), (2, 'Frequent'), (3, 'Widespread')], null=True)),
                ('condition_notes', models.TextField(blank=True)),
                ('distress', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='conditions', to='grms.distresstype')),
            ],
            options={
                'ordering': ['distress__distress_code', 'severity_code', 'extent_code'],
                'unique_together': {('distress', 'severity_code', 'extent_code')},
            },
        ),
        migrations.CreateModel(
            name='NightAdjustmentLookup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('hours_counted', models.PositiveSmallIntegerField()),
                ('adjustment_factor', models.DecimalField(decimal_places=3, max_digits=6)),
                ('effective_date', models.DateField()),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'unique_together': {('hours_counted', 'effective_date')},
            },
        ),
        migrations.CreateModel(
            name='StructureConditionSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_year', models.PositiveIntegerField(help_text='Year of survey')),
                ('inspector_name', models.CharField(blank=True, max_length=150)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('comments', models.TextField(blank=True)),
                ('attachments', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('modified_at', models.DateTimeField(auto_now=True)),
                ('structure', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='surveys', to='grms.structureinventory')),
                ('condition_rating', models.ForeignKey(help_text='Overall condition (Good/Fair/Poor/Bad)', on_delete=django.db.models.deletion.PROTECT, to='grms.conditionrating')),
                ('qa_status', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='grms.qastatus')),
            ],
        ),
        migrations.CreateModel(
            name='FurnitureConditionSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_year', models.PositiveIntegerField()),
                ('comments', models.TextField(blank=True)),
                ('inspected_by', models.CharField(blank=True, max_length=150)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('condition_rating', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='grms.conditionrating')),
                ('furniture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='surveys', to='grms.furnitureinventory')),
                ('qa_status', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='grms.qastatus')),
            ],
        ),
        migrations.CreateModel(
            name='FurnitureConditionDetailedSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_level', models.CharField(choices=[('network', 'Network'), ('detailed', 'Detailed')], max_length=10)),
                ('severity_code', models.PositiveSmallIntegerField(choices=[(1, 'Minor'), (2, 'Moderate'), (3, 'Severe')])),
                ('extent_code', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Isolated'), (2, 'Frequent'), (3, 'Widespread')], null=True)),
                ('quantity_unit', models.CharField(blank=True, choices=[('item', 'item'), ('m', 'm')], max_length=4, null=True)),
                ('quantity_estimated', models.DecimalField(blank=True, decimal_places=3, max_digits=12, null=True)),
                ('computed_by_lookup', models.BooleanField(default=True)),
                ('severity_notes', models.TextField(blank=True)),
                ('inspected_by', models.CharField(blank=True, max_length=150, null=True)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('comments', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='grms.activitylookup')),
                ('awp', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='furniture_detailed_surveys', to='grms.annualworkplan')),
                ('distress', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='furniture_surveys', to='grms.distresstype')),
                ('distress_condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='furniture_surveys', to='grms.distresscondition')),
                ('furniture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='detailed_surveys', to='grms.furnitureinventory')),
                ('qa_status', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='grms.qastatus')),
            ],
            options={
                'ordering': ['-inspection_date', 'furniture_id'],
            },
        ),
        migrations.AddField(
            model_name='structureinventory',
            name='road',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='structures', to='grms.road'),
        ),
        migrations.CreateModel(
            name='BenefitFactor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('traffic_vehicles_per_day', models.IntegerField(blank=True, null=True)),
                ('trading_centers_count', models.IntegerField(blank=True, null=True)),
                ('villages_connected_count', models.IntegerField(blank=True, null=True)),
                ('farmland_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('health_centers_count', models.IntegerField(blank=True, null=True)),
                ('educational_institutions_count', models.IntegerField(blank=True, null=True)),
                ('total_benefit_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('last_calculated', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('road', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='benefit_factors', to='grms.road')),
            ],
        ),
        migrations.AddField(
            model_name='annualworkplan',
            name='road',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.road'),
        ),
        migrations.AddField(
            model_name='structureinventory',
            name='section',
            field=models.ForeignKey(blank=True, help_text='Optional road section reference', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='structures', to='grms.roadsection'),
        ),
        migrations.CreateModel(
            name='PrioritizationResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fiscal_year', models.PositiveIntegerField()),
                ('population_served', models.IntegerField(blank=True, null=True)),
                ('benefit_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('improvement_cost', models.DecimalField(decimal_places=2, max_digits=15)),
                ('ranking_index', models.DecimalField(decimal_places=4, max_digits=10)),
                ('priority_rank', models.PositiveIntegerField(help_text='Rank order (1 = highest priority)')),
                ('recommended_budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('approved_budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('calculation_date', models.DateField(auto_now_add=True)),
                ('notes', models.TextField(blank=True)),
                ('road', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.road')),
                ('section', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='grms.roadsection')),
            ],
            options={
                'ordering': ['fiscal_year', 'priority_rank'],
            },
        ),
        migrations.CreateModel(
            name='RoadSectionIntervention',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scope', models.CharField(choices=[('Full Section', 'Full Section'), ('Partial Section', 'Partial Section')], max_length=20)),
                ('start_chainage_km', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('end_chainage_km', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('length_km', models.DecimalField(blank=True, decimal_places=3, help_text='Length of work', max_digits=8, null=True)),
                ('estimated_cost', models.DecimalField(decimal_places=2, max_digits=12)),
                ('calculated_mci', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
                ('priority_score', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('intervention_year', models.PositiveIntegerField()),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Completed', 'Completed'), ('Deferred', 'Deferred')], default='Pending', max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('intervention', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='grms.interventionlookup')),
                ('section', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='planned_interventions', to='grms.roadsection')),
            ],
        ),
        migrations.CreateModel(
            name='RoadSegment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('station_from_km', models.DecimalField(decimal_places=3, help_text='Segment start chainage (km)', max_digits=8)),
                ('station_to_km', models.DecimalField(decimal_places=3, help_text='Segment end chainage (km)', max_digits=8)),
                ('cross_section', models.CharField(choices=[('Cutting', 'Cutting'), ('Embankment', 'Embankment'), ('Cut/Embankment', 'Cut/Embankment'), ('Flat', 'Flat')], help_text='Cross-section type (road in cutting, embankment, etc)', max_length=20)),
                ('terrain_transverse', models.CharField(choices=[('Flat', 'Flat'), ('Rolling', 'Rolling'), ('Mountainous', 'Mountainous'), ('Escarpment', 'Escarpment')], help_text='Terrain transverse slope', max_length=15)),
                ('terrain_longitudinal', models.CharField(choices=[('Flat', 'Flat'), ('Rolling', 'Rolling'), ('Mountainous', 'Mountainous'), ('Escarpment', 'Escarpment')], help_text='Terrain longitudinal slope', max_length=15)),
                ('ditch_left_present', models.BooleanField(default=False)),
                ('ditch_right_present', models.BooleanField(default=False)),
                ('shoulder_left_present', models.BooleanField(default=False)),
                ('shoulder_right_present', models.BooleanField(default=False)),
                ('carriageway_width_m', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('comment', models.TextField(blank=True, help_text='Notes or comments for this segment')),
                ('section', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='segments', to='grms.roadsection')),
            ],
        ),
        migrations.CreateModel(
            name='RoadConditionSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('drainage_condition_left', models.DecimalField(blank=True, decimal_places=1, help_text='Left drainage condition (0–5 scale)', max_digits=3, null=True)),
                ('drainage_condition_right', models.DecimalField(blank=True, decimal_places=1, max_digits=3, null=True)),
                ('shoulder_condition_left', models.DecimalField(blank=True, decimal_places=1, max_digits=3, null=True)),
                ('shoulder_condition_right', models.DecimalField(blank=True, decimal_places=1, max_digits=3, null=True)),
                ('surface_condition_factor', models.DecimalField(blank=True, decimal_places=1, help_text='Surface condition factor (e.g., 0–5 scale)', max_digits=3, null=True)),
                ('is_there_bottleneck', models.BooleanField(default=False, help_text='Is there any bottleneck on this segment?')),
                ('bottleneck_size_m', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('comments', models.TextField(blank=True)),
                ('inspected_by', models.CharField(blank=True, max_length=150)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('calculated_mci', models.DecimalField(blank=True, decimal_places=1, help_text='Maintenance Condition Index for this segment', max_digits=4, null=True)),
                ('intervention_recommended', models.TextField(blank=True, help_text='Suggested intervention based on condition')),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='condition_surveys', to='grms.roadsegment')),
            ],
        ),
        migrations.CreateModel(
            name='RoadConditionDetailedSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_level', models.CharField(choices=[('network', 'Network'), ('detailed', 'Detailed')], max_length=10)),
                ('severity_code', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Minor'), (2, 'Moderate'), (3, 'Severe')], null=True)),
                ('extent_code', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Isolated'), (2, 'Frequent'), (3, 'Widespread')], null=True)),
                ('extent_percent', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('distress_length_m', models.DecimalField(blank=True, decimal_places=2, max_digits=9, null=True)),
                ('distress_area_m2', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('distress_volume_m3', models.DecimalField(blank=True, decimal_places=3, max_digits=12, null=True)),
                ('observed_gravel_thickness_mm', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('carriageway_width_m', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('shoulder_width_left_m', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('shoulder_width_right_m', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('ditch_left_present', models.BooleanField(blank=True, default=False, null=True)),
                ('ditch_right_present', models.BooleanField(blank=True, default=False, null=True)),
                ('quantity_unit', models.CharField(blank=True, choices=[('m3', 'm³'), ('m2', 'm²'), ('m', 'm'), ('km', 'km')], max_length=4, null=True)),
                ('quantity_estimated', models.DecimalField(blank=True, decimal_places=3, max_digits=14, null=True)),
                ('quantity_source', models.CharField(choices=[('lookup', 'Lookup'), ('manual_override', 'Manual override')], default='lookup', max_length=20)),
                ('severity_notes', models.TextField(blank=True)),
                ('inspected_by', models.CharField(blank=True, max_length=150, null=True)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('comments', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='grms.activitylookup')),
                ('awp', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='road_detailed_surveys', to='grms.annualworkplan')),
                ('distress', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='road_surveys', to='grms.distresstype')),
                ('distress_condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='road_surveys', to='grms.distresscondition')),
                ('qa_status', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='grms.qastatus')),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='detailed_surveys', to='grms.roadsegment')),
            ],
            options={
                'ordering': ['-inspection_date', 'road_segment_id'],
            },
        ),
        migrations.AddField(
            model_name='furnitureinventory',
            name='road_segment',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='furniture', to='grms.roadsegment'),
        ),
        migrations.CreateModel(
            name='StructureConditionDetailedSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_level', models.CharField(choices=[('network', 'Network'), ('detailed', 'Detailed')], max_length=10)),
                ('severity_code', models.PositiveSmallIntegerField(choices=[(1, 'Minor'), (2, 'Moderate'), (3, 'Severe')])),
                ('extent_code', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Isolated'), (2, 'Frequent'), (3, 'Widespread')], null=True)),
                ('distress_length_m', models.DecimalField(blank=True, decimal_places=2, max_digits=9, null=True)),
                ('distress_area_m2', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('distress_volume_m3', models.DecimalField(blank=True, decimal_places=3, max_digits=12, null=True)),
                ('check_dam_count', models.IntegerField(blank=True, null=True)),
                ('quantity_unit', models.CharField(blank=True, choices=[('m3', 'm³'), ('m2', 'm²'), ('item', 'item')], max_length=4, null=True)),
                ('quantity_estimated', models.DecimalField(blank=True, decimal_places=3, max_digits=14, null=True)),
                ('computed_by_lookup', models.BooleanField(default=True)),
                ('severity_notes', models.TextField(blank=True)),
                ('inspected_by', models.CharField(blank=True, max_length=150, null=True)),
                ('inspection_date', models.DateField(blank=True, null=True)),
                ('comments', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='grms.activitylookup')),
                ('awp', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='structure_detailed_surveys', to='grms.annualworkplan')),
                ('distress', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='structure_surveys', to='grms.distresstype')),
                ('distress_condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='structure_surveys', to='grms.distresscondition')),
                ('qa_status', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='grms.qastatus')),
                ('structure', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='detailed_surveys', to='grms.structureinventory')),
            ],
            options={
                'ordering': ['-inspection_date', 'structure_id'],
            },
        ),
        migrations.CreateModel(
            name='StructureIntervention',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('required_length_m', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('estimated_cost', models.DecimalField(decimal_places=2, max_digits=12)),
                ('priority_score', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('intervention_year', models.PositiveIntegerField(help_text='Planned year of intervention')),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Completed', 'Completed'), ('Deferred', 'Deferred')], default='Pending', max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('intervention', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='grms.interventionlookup')),
                ('structure', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='planned_interventions', to='grms.structureinventory')),
            ],
        ),
        migrations.CreateModel(
            name='TrafficSurvey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('survey_year', models.PositiveIntegerField()),
                ('cycle_number', models.PositiveSmallIntegerField(help_text='Economic season cycle (1,2,3)')),
                ('count_start_date', models.DateField(blank=True, null=True)),
                ('count_end_date', models.DateField(blank=True, null=True)),
                ('count_days_per_cycle', models.PositiveSmallIntegerField(default=7, help_text='# of days counted per cycle')),
                ('count_hours_per_day', models.PositiveSmallIntegerField(default=12, help_text='Hours counted per day')),
                ('night_adjustment_factor', models.DecimalField(decimal_places=3, default=Decimal('1.330'), max_digits=5)),
                ('method', models.CharField(choices=[('MOC', 'Manual (Classified)'), ('MTS', 'Manual (Tally Sheet)'), ('Automated', 'Automated Counter'), ('Other', 'Other')], help_text='Traffic counting method', max_length=20)),
                ('observer', models.CharField(blank=True, help_text='Observer/team name', max_length=150)),
                ('location_override', PointField(blank=True, help_text='Optional GPS point if not exactly at segment center', null=True, srid=4326)),
                ('weather_notes', models.CharField(blank=True, max_length=100)),
                ('qa_status', models.CharField(choices=[('Draft', 'Draft'), ('In Review', 'In Review'), ('Approved', 'Approved'), ('Rejected', 'Rejected')], default='Draft', max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='traffic_surveys', to='grms.roadsegment')),
            ],
        ),
        migrations.CreateModel(
            name='TrafficQC',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('issue_type', models.CharField(help_text="Type of issue (e.g. 'Missing Day', 'Spike')", max_length=100)),
                ('issue_detail', models.TextField(help_text='Detailed description of the issue')),
                ('resolved', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.roadsegment')),
                ('traffic_survey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='qc_issues', to='grms.trafficsurvey')),
            ],
        ),
        migrations.CreateModel(
            name='TrafficCountRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('count_date', models.DateField()),
                ('time_block_from', models.TimeField(blank=True, null=True)),
                ('time_block_to', models.TimeField(blank=True, null=True)),
                ('vehicle_class', models.CharField(choices=[('Car', 'Car'), ('LightGoods', 'LightGoods'), ('MiniBus', 'MiniBus'), ('MediumGoods', 'MediumGoods'), ('HeavyGoods', 'HeavyGoods'), ('Bus', 'Bus'), ('Tractor', 'Tractor'), ('Motorcycle', 'Motorcycle'), ('Bicycle', 'Bicycle'), ('Pedestrian', 'Pedestrian')], help_text='Vehicle classification counted', max_length=20)),
                ('count_value', models.PositiveIntegerField(default=0, help_text='Observed count for this class/time')),
                ('is_market_day', models.BooleanField(default=False, help_text='Market day indicator for this count')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.roadsegment')),
                ('traffic_survey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='count_records', to='grms.trafficsurvey')),
            ],
        ),
        migrations.CreateModel(
            name='TrafficSurveySummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vehicle_class', models.CharField(choices=[('Car', 'Car'), ('LightGoods', 'LightGoods'), ('MiniBus', 'MiniBus'), ('MediumGoods', 'MediumGoods'), ('HeavyGoods', 'HeavyGoods'), ('Bus', 'Bus'), ('Tractor', 'Tractor'), ('Motorcycle', 'Motorcycle'), ('Bicycle', 'Bicycle'), ('Pedestrian', 'Pedestrian')], max_length=20)),
                ('avg_daily_count_all_cycles', models.DecimalField(decimal_places=3, max_digits=12)),
                ('adt_class', models.DecimalField(decimal_places=3, help_text='Annual daily traffic for this class', max_digits=12)),
                ('pcu_class', models.DecimalField(decimal_places=3, help_text='ADT * PCU factor (this class)', max_digits=12)),
                ('adt_total', models.DecimalField(decimal_places=3, help_text='Sum of ADT across classes', max_digits=12)),
                ('pcu_total', models.DecimalField(decimal_places=3, help_text='Sum of PCU across classes', max_digits=14)),
                ('confidence_score', models.DecimalField(decimal_places=2, help_text='Data confidence (0–100)', max_digits=5)),
                ('computed_at', models.DateTimeField(auto_now_add=True)),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.roadsegment')),
                ('traffic_survey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='survey_summary', to='grms.trafficsurvey')),
            ],
        ),
        migrations.CreateModel(
            name='BridgeConditionSurvey',
            fields=[
                ('structure_survey', models.OneToOneField(limit_choices_to={'structure__structure_category': 'Bridge'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureconditionsurvey')),
                ('expansion_joint_ok', models.BooleanField(default=False, help_text='Expansion joint present/OK')),
                ('remarks', models.TextField(blank=True)),
                ('abutment_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('deck_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('pier_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('wearing_surface', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
            ],
        ),
        migrations.CreateModel(
            name='CulvertConditionSurvey',
            fields=[
                ('structure_survey', models.OneToOneField(limit_choices_to={'structure__structure_category': 'Culvert'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureconditionsurvey')),
                ('remarks', models.TextField(blank=True)),
                ('barrel_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('headwall_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('inlet_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('outlet_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
            ],
        ),
        migrations.CreateModel(
            name='OtherStructureConditionSurvey',
            fields=[
                ('structure_survey', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='grms.structureconditionsurvey')),
                ('remarks', models.TextField(blank=True)),
                ('ford_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
                ('wall_condition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='grms.conditionfactor')),
            ],
        ),
        migrations.CreateModel(
            name='DistressActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_value', models.DecimalField(decimal_places=3, max_digits=12)),
                ('scale_basis', models.CharField(choices=[('per_segment', 'Per segment'), ('per_100m', 'Per 100 m'), ('per_1m', 'Per 1 m'), ('per_m2', 'Per m²'), ('per_culvert', 'Per culvert'), ('per_item', 'Per item'), ('fixed', 'Fixed quantity')], max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('activity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='distress_links', to='grms.activitylookup')),
                ('condition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='grms.distresscondition')),
            ],
            options={
                'unique_together': {('condition', 'activity')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='annualworkplan',
            unique_together={('fiscal_year', 'road')},
        ),
        migrations.CreateModel(
            name='TrafficForPrioritization',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fiscal_year', models.PositiveIntegerField()),
                ('value_type', models.CharField(choices=[('ADT', 'ADT'), ('PCU', 'PCU')], max_length=3)),
                ('value', models.DecimalField(decimal_places=3, help_text='Numeric ADT or PCU used', max_digits=14)),
                ('prepared_at', models.DateTimeField(auto_now_add=True)),
                ('road', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.road')),
                ('road_segment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='grms.roadsegment')),
                ('source_survey', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='grms.trafficsurvey')),
            ],
            options={
                'unique_together': {('road', 'fiscal_year', 'value_type', 'road_segment')},
            },
        ),
        migrations.CreateModel(
            name='TrafficCycleSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vehicle_class', models.CharField(choices=[('Car', 'Car'), ('LightGoods', 'LightGoods'), ('MiniBus', 'MiniBus'), ('MediumGoods', 'MediumGoods'), ('HeavyGoods', 'HeavyGoods'), ('Bus', 'Bus'), ('Tractor', 'Tractor'), ('Motorcycle', 'Motorcycle'), ('Bicycle', 'Bicycle'), ('Pedestrian', 'Pedestrian')], max_length=20)),
                ('cycle_number', models.PositiveSmallIntegerField()),
                ('cycle_days_counted', models.PositiveIntegerField(help_text='Days counted in this cycle')),
                ('cycle_sum_count', models.BigIntegerField(help_text='Total vehicle count in cycle')),
                ('cycle_daily_avg', models.DecimalField(decimal_places=3, help_text='Average count/day in cycle', max_digits=10)),
                ('cycle_daily_24hr', models.DecimalField(decimal_places=3, help_text='Daily count adjusted to 24h', max_digits=12)),
                ('cycle_pcu', models.DecimalField(decimal_places=3, help_text='Daily PCU for this class', max_digits=12)),
                ('qc_flag', models.TextField(blank=True, help_text='Quality control notes/flags')),
                ('road_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='grms.roadsegment')),
                ('traffic_survey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cycle_summaries', to='grms.trafficsurvey')),
            ],
            options={
                'unique_together': {('traffic_survey', 'vehicle_class', 'cycle_number')},
            },
        ),
        migrations.CreateModel(
            name='UnitCost',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('region', models.CharField(max_length=100)),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=12)),
                ('effective_date', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('intervention', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='unit_costs', to='grms.interventionlookup')),
            ],
            options={
                'unique_together': {('intervention', 'region', 'effective_date')},
            },
        ),
    ]
