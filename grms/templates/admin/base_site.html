{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ site_title }}{% endblock %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'grms/css/dashboard.css' %}">
  <link rel="stylesheet" href="{% static 'grms/css/sidebar_custom.css' %}">
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'grms/js/dashboard.js' %}"></script>
  <script src="{% static 'grms/js/sidebar_custom.js' %}"></script>
{% endblock %}

{# Override nav sidebar to display custom menu #}
{% block nav-sidebar %}
  <nav id="nav-sidebar" class="sidebar" aria-label="Admin navigation">
    {% for section in sections %}
      <div class="group">
        <button
          class="sidebar-group-title"
          type="button"
          aria-expanded="true"
          aria-controls="section-{{ forloop.counter }}"
        >
          <span>{{ section.title }}</span>
          <span class="toggle-icon" aria-hidden="true">â–¾</span>
        </button>
        <ul id="section-{{ forloop.counter }}" class="sidebar-items open">
          {% for model in section.models %}
            <li class="sidebar-item">
              <a href="{{ model.admin_url }}">{{ model.name }}</a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% empty %}
      {# Fallback to the stock app list if grouping is unavailable #}
      {% include "admin/app_list.html" with app_list=app_list show_changelinks=True %}
    {% endfor %}
  </nav>
{% endblock %}
