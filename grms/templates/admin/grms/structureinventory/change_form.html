{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="{% static 'grms/js/asset-context-map.js' %}" defer></script>
{% endblock %}

{% block after_field_sets %}
  {{ block.super }}
  {% if asset_map_context_url %}
    <div class="grms-asset-map-panel">
      <h3>Asset context map</h3>
      <p class="help">Shows the parent road, section, and nearby structures.</p>
      <div id="asset-context-map"
           class="grms-asset-map"
           data-context-url="{{ asset_map_context_url }}"></div>
    </div>
  {% else %}
    <p class="help">Save the structure first to enable the context map.</p>
  {% endif %}
{% endblock %}
